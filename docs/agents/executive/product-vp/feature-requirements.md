# 功能需求清單
**Feature Requirements Document**

## 📋 專案資訊

| 項目 | 內容 |
|------|------|
| 專案名稱 | Pattaya Trip 2026 PWA |
| 產品類型 | 旅遊攻略 PWA |
| 目標用戶 | 前往芭達雅旅遊的華語使用者 |
| 使用場景 | 旅遊期間（可能無網路）、行前規劃 |
| 文件日期 | 2026-02-18 |
| 產出者 | 產品副總監 (Product VP) |

---

## 🎯 產品目標

### 核心價值主張

> **讓芭達雅旅遊攻略隨時可用，即使在沒有網路的情況下也能查閱所有資訊**

### 用戶痛點

1. **網路不穩定** - 泰國旅遊時網路訊號不佳或流量不足
2. **資訊分散** - 白天行程、夜生活、泰語助手分散在不同網站
3. **無法離線** - 傳統網頁需要網路才能查看
4. **操作不便** - 需要開瀏覽器輸入網址，不如 App 方便

### PWA 解決方案

| 痛點 | PWA 解法 | 價值 |
|------|---------|------|
| 網路不穩定 | 離線快取 | 即使無網路也能瀏覽 |
| 資訊分散 | 統一入口 | 一個 App 包含所有功能 |
| 無法離線 | Service Worker | 預先快取所有頁面 |
| 操作不便 | 可安裝到主畫面 | 像原生 App 一樣啟動 |

---

## 📱 頁面功能分析

### 現有 11 個頁面分析

| # | 頁面 | 主要功能 | 互動性 | 資料來源 | 離線需求 |
|---|------|---------|--------|---------|---------|
| 1 | `index.html` | 首頁導航 | 低（純連結） | 無 | ✅ 高 |
| 2 | `day.html` | 白天行程展示 | 低（瀏覽） | 內嵌 HTML | ✅ 高 |
| 3 | `night.html` | 夜生活攻略（輪播） | 中（Swiper） | 內嵌 HTML | ✅ 高 |
| 4 | `itinerary.html` | 行程總覽 | 低（瀏覽） | 內嵌 HTML | ✅ 高 |
| 5 | `thai-helper.html` | 泰語搜尋 | 高（即時搜尋） | 內嵌 JSON | ✅ 極高 |
| 6 | `games.html` | 派對遊戲列表 | 中（連結） | 內嵌 HTML | ⭐ 中 |
| 7 | `truth-or-dare.html` | 真心話大冒險 | 高（隨機抽取） | 內嵌 Array | ⭐ 中 |
| 8 | `resources.html` | 外部資源連結 | 低（連結） | 內嵌 HTML | 🔵 低 |
| 9 | `sop.html` | 旅遊 SOP | 低（瀏覽） | 內嵌 HTML | ✅ 高 |
| 10 | `esim.html` | eSIM 購買資訊 | 低（連結） | 內嵌 HTML | ⭐ 中 |
| 11 | `money.html` | 換錢資訊 | 低（瀏覽） | 內嵌 HTML | ✅ 高 |

**離線需求等級**：
- ✅ 高：旅遊期間必查資訊
- ⭐ 中：偶爾使用
- 🔵 低：主要連結外部資源

---

## 🎯 功能優先級定義

### Phase 1: MVP 核心功能（必備）

**目標：確保基礎 PWA 功能可運作**

| 功能 | 需求 | 優先級 |
|------|------|--------|
| PWA 可安裝性 | manifest.json + meta tags | 🔴 P0 |
| 離線瀏覽（核心頁面） | 快取 9 個核心頁面 | 🔴 P0 |
| Service Worker 基礎快取 | install + fetch events | 🔴 P0 |
| 泰語助手離線功能 | 確保搜尋功能離線可用 | 🔴 P0 |
| 首頁導航 | 正常運作 | 🔴 P0 |

**核心頁面清單（9/11 頁）**：
1. ✅ `index.html`
2. ✅ `day.html`
3. ✅ `night.html`
4. ✅ `itinerary.html`
5. ✅ `thai-helper.html`
6. ✅ `sop.html`
7. ✅ `money.html`
8. ✅ `esim.html`
9. ✅ `games.html`

**暫時排除**：
- ❌ `resources.html`（主要是外部連結）
- ❌ `truth-or-dare.html`（遊戲功能非核心）

---

### Phase 2: 離線體驗優化（重要）

**目標：提升離線使用體驗**

| 功能 | 需求 | 優先級 |
|------|------|--------|
| 離線 Fallback 頁面 | 當資源無法載入時顯示 | 🟠 P1 |
| CDN 資源快取 | Google Fonts, Swiper.js | 🟠 P1 |
| 更新通知 | 偵測新版本並提示用戶 | 🟠 P1 |
| 快取版本管理 | 清理舊快取 | 🟠 P1 |

---

### Phase 3: 安裝體驗優化（優選）

**目標：提升安裝率與用戶體驗**

| 功能 | 需求 | 優先級 |
|------|------|--------|
| Android 安裝提示 | beforeinstallprompt API | 🟡 P2 |
| iOS 安裝引導 | 自訂 UI 說明「加入主畫面」 | 🟡 P2 |
| PWA 圖示設計 | 192x192, 512x512, maskable | 🟡 P2 |
| 啟動畫面 | 品牌化 Splash Screen | 🟡 P2 |

---

### Phase 4: 進階功能（延後）

**目標：增強互動性（非 MVP）**

| 功能 | 需求 | 優先級 |
|------|------|--------|
| 推送通知 | 行程提醒、匯率更新 | 🔵 P3 |
| 背景同步 | 匯率自動更新 | 🔵 P3 |
| 個人化設定 | 收藏景點、自訂行程 | 🔵 P3 |
| IndexedDB | 儲存用戶資料 | 🔵 P3 |
| 分享功能 | Web Share API | 🔵 P3 |

---

## 🚀 MVP 範圍定義

### MVP 包含功能

**基礎 PWA 功能**：
- ✅ 可安裝到主畫面（Android + iOS）
- ✅ 離線瀏覽 9 個核心頁面
- ✅ 泰語助手搜尋功能離線可用
- ✅ 派對遊戲隨機功能離線可用
- ✅ Service Worker 快取管理
- ✅ 更新通知

**不包含（延後開發）**：
- ❌ 推送通知
- ❌ 背景同步
- ❌ IndexedDB（無需儲存用戶資料）
- ❌ 複雜的快取策略（先採用 Network First）

---

## 📊 使用者旅程規劃

### 情境 1：行前規劃（有網路）

```
用戶 → 開啟網站 → 瀏覽行程
     ↓
   看到「安裝到主畫面」提示
     ↓
   點擊安裝 → 成功加入主畫面
     ↓
   背景快取所有頁面完成
```

**關鍵需求**：
- 安裝提示要清楚（說明可離線使用）
- 快取要自動完成（用戶無感）

---

### 情境 2：旅遊期間（無網路）

```
用戶 → 點擊主畫面 App 圖示
     ↓
   啟動 PWA（使用快取）
     ↓
   瀏覽白天行程 / 夜生活攻略
     ↓
   使用泰語助手查單字（離線搜尋）
     ↓
   查看換錢資訊 / SOP
```

**關鍵需求**：
- 所有核心功能離線可用
- 泰語搜尋不需網路
- 載入速度要快（使用快取）

---

### 情境 3：內容更新（有網路）

```
用戶 → 開啟 PWA
     ↓
   Service Worker 偵測到新版本
     ↓
   顯示「有新版本可用」通知
     ↓
   用戶點擊「立即更新」→ 重新整理
     ↓
   載入最新內容並更新快取
```

**關鍵需求**：
- 自動偵測更新
- 友善的更新提示
- 不強制更新（允許延後）

---

## 🎨 UI/UX 需求

### 1. 安裝提示設計

**Android（使用原生 API）**：
- 時機：首次訪問後 30 秒（避免打擾）
- 文案：「📱 安裝到主畫面，離線也能用！」
- CTA：「安裝」 / 「稍後」

**iOS（自訂 UI）**：
- 位置：頁面底部（不遮擋內容）
- 說明：「點擊分享按鈕 ⎙，選擇『加入主畫面』」
- 圖示：分享按鈕動畫提示

### 2. 離線狀態提示

**方案 A：頂部橫幅（非阻斷）**
```
🔌 目前離線瀏覽 - 部分連結可能無法使用
```

**方案 B：無提示（靜默）**
- 只在點擊外部連結時提示

**建議：採用方案 A**（讓用戶知道目前狀態）

### 3. 更新通知設計

**位置**：頁面頂部（固定）
**樣式**：霓虹粉紅背景 + 白色文字
**文案**：「🎉 有新版本可用！」
**CTA**：「立即更新」按鈕

---

## 📈 成功指標

### 產品指標

| 指標 | 目標值 | 測量方式 |
|------|--------|---------|
| 安裝率 | 30%+ | 訪客中的安裝數 |
| 離線使用率 | 50%+ | 離線開啟次數 / 總開啟次數 |
| 功能完整性 | 9/11 頁離線可用 | 手動測試 |
| 用戶滿意度 | 4.5/5 | 用戶回饋 |

### 技術指標

| 指標 | 目標值 | 測量方式 |
|------|--------|---------|
| Lighthouse PWA Score | 90+ | Lighthouse Audit |
| 快取命中率 | 80%+ | Service Worker 統計 |
| 首次載入時間 (FCP) | < 1.5s | Lighthouse |
| 離線啟動時間 | < 0.5s | 手動測試 |

---

## ✅ 功能檢查清單

### MVP 必備功能（Phase 1）

- [ ] ✅ 可安裝到主畫面（Android + iOS）
- [ ] ✅ 9 個核心頁面離線可用
- [ ] ✅ 泰語助手離線搜尋
- [ ] ✅ Service Worker 註冊成功
- [ ] ✅ manifest.json 配置正確
- [ ] ✅ PWA meta tags 加入所有頁面

### 離線體驗（Phase 2）

- [ ] ⭐ 離線 Fallback 頁面
- [ ] ⭐ Google Fonts 快取
- [ ] ⭐ Swiper.js 快取
- [ ] ⭐ 更新通知功能
- [ ] ⭐ 舊快取自動清理

### 安裝體驗（Phase 3）

- [ ] 🌟 Android 安裝提示
- [ ] 🌟 iOS 安裝引導 UI
- [ ] 🌟 PWA 圖示（3 種尺寸）
- [ ] 🌟 品牌化啟動畫面

---

## 🚫 功能排除清單

### 不包含在 MVP 中

| 功能 | 排除原因 | 可能納入時程 |
|------|---------|-------------|
| 推送通知 | iOS 不支援 Web Push | Phase 4 |
| 背景同步 | 非核心功能 | Phase 4 |
| IndexedDB | 無需儲存用戶資料 | Phase 4 |
| 個人化設定 | 複雜度高 | Phase 4 |
| 多語言切換 | 目前僅繁體中文 | 未規劃 |
| 用戶登入 | 無需帳號系統 | 未規劃 |

---

## 📝 產品規格總結

### 核心定位

**Pattaya Trip 2026 PWA = 離線優先的旅遊攻略 App**

### 關鍵特色

1. **離線可用** - 9 個核心頁面完全離線
2. **泰語助手** - 無網路也能查單字
3. **快速啟動** - 像原生 App 一樣
4. **自動更新** - 有新內容會通知

### 目標用戶

- 📍 前往芭達雅旅遊的華語使用者
- 📱 使用智慧型手機
- 🌐 旅遊期間網路不穩定
- 🎯 需要即時查閱行程與泰語

---

**產出者**：產品副總監 (Product VP)
**審核狀態**：✅ 已完成
**最後更新**：2026-02-18
